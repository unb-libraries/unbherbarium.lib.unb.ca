<?php

/**
 * @file
 * Add style to feature pages.
 */

use Drupal\Core\Entity\EntityInterface;

/**
 * Implements hook_preprocess_views_exposed_form().
 */
function herbarium_specimen_preprocess_views_exposed_form(&$variables) {
  $variables['#attached']['library'][] = 'herbarium_specimen/views-form';
}

/**
 * Build batch operations array for specimen surrogates from an archival master.
 *
 * @param object $nid
 *   The node id of the parent herbarium_specimen node.
 * @param object $fid
 *   The file ID of the archival master TIFF File object.
 *
 * @return array
 *   A batch API operations array to generate the required surrogates.
 */
function _herbarium_specimen_generate_specimen_surrogates_batch($nid, $fid) {


  return array(
    'title' => t('Generating Herbarium Specimen Surrogate Images'),
    'init_message' => t('Generating Herbarium Specimen Surrogate Images'),
    'operations' => array(

      array(
        array(
          'Drupal\herbarium_specimen\HerbariumImageSurrogateFactory',
          'deleteExistingAssets',
        ),
        array($fid, $nid),
      ),

      array(
        array(
          'Drupal\herbarium_specimen\HerbariumImageSurrogateFactory',
          'buildJpgSurrogate',
        ),
        array($fid, $nid),
      ),

      array(
        array(
          'Drupal\herbarium_specimen\HerbariumImageSurrogateFactory',
          'buildMaskedJpgSurrogate',
        ),
        array($fid, $nid),
      ),

      array(
        array(
          'Drupal\herbarium_specimen\HerbariumImageSurrogateFactory',
          'attachSurrogatesToNode',
        ),
        array($fid, $nid),
      ),

      array(
        array(
          'Drupal\herbarium_specimen\HerbariumImageSurrogateFactory',
          'buildDziTiles',
        ),
        array($fid, $nid),
      ),


    ),
  );
}
